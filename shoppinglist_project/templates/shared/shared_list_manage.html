<h2>共有リストの作成・管理</h2>

<form method="post">
  {% csrf_token %}
  <ul>
    {% for store in stores %}
      <li>
        {% with shared_list=store.sharedlist_set.first %}
          {% if shared_list %}
            <label>
              <input type="checkbox" name="shared_lists" value="{{ shared_list.id }}">
              {{ store.store_name }}
            </label>
          {% else %}
            {{ store.store_name }}
            <a href="{% url 'app:shared_list_create' store_id=store.store_id %}" style="margin-left: 10px;">
              {{ store.store_name }}リストを共有する
            </a>
          {% endif %}
        {% endwith %}
      </li>
    {% empty %}
      <li>まだお店が登録されていません。</li>
    {% endfor %}
  </ul>

  <button type="submit" onclick="return confirm('選択した共有を本当に解除しますか？');">
    選択した共有をやめる
  </button>
</form>

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

<p><a href="{% url 'app:home' %}">← ホームに戻る</a></p>


